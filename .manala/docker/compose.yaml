name: manala-ansible-roles

services:

    ##########
    # System #
    ##########

    system:
        hostname: manala-ansible-roles
        build:
            context: ..
            dockerfile: docker/Dockerfile
        image: manala-ansible-roles:20230220140707
        volumes:
            - ../..:${DIR}
        environment:
            DIR: ${DIR}
            CACHE_DIR: ${CACHE_DIR}
        env_file:
            - ../../.env.dist
            - ../../.env
        working_dir: ${DIR}
        # Use default docker bridge network
        network_mode: bridge
