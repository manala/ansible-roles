---

# Version
{{ if has "version" .Vars.tags }}
file:
  /usr/local/bin/composer:
    exists: true
    filetype: file
    owner: root
{{ if .Env.DISTRIBUTION_RELEASE | regexMatch "jessie|stretch" }}
    group: staff
{{ else }}
    group: root
{{ end }}
    mode: "0755"

command:
  composer --version:
    exit-status: 0
    stdout:
      - Composer version 1.8.0
{{ end }}

# No version
{{ if has "no_version" .Vars.tags }}
file:
  /usr/local/bin/composer:
    exists: true
    filetype: file
    owner: root
{{ if .Env.DISTRIBUTION_RELEASE | regexMatch "jessie|stretch" }}
    group: staff
{{ else }}
    group: root
{{ end }}
    mode: "0755"

command:
  composer --version:
    exit-status: 0
    stdout:
      - Composer version 2
{{ end }}

# Version_update
{{ if has "version_update" .Vars.tags }}
file:
  /usr/local/bin/composer:
    exists: true
    filetype: file
    owner: root
{{ if .Env.DISTRIBUTION_RELEASE | regexMatch "jessie|stretch" }}
    group: staff
{{ else }}
    group: root
{{ end }}
    mode: "0755"

command:
  composer --version:
    exit-status: 0
    stdout:
      - Composer version 1.10.15
{{ end }}

# Major_version_no_change
{{ if has "major_version_no_change" .Vars.tags }}
file:
  /usr/local/bin/composer:
    exists: true
    filetype: file
    owner: root
{{ if .Env.DISTRIBUTION_RELEASE | regexMatch "jessie|stretch" }}
    group: staff
{{ else }}
    group: root
{{ end }}
    mode: "0755"

command:
  composer --version:
    exit-status: 0
    stdout:
      - Composer version 1.10.15
{{ end }}

# Major_version
{{ if has "major_version" .Vars.tags }}
file:
  /usr/local/bin/composer:
    exists: true
    filetype: file
    owner: root
{{ if .Env.DISTRIBUTION_RELEASE | regexMatch "jessie|stretch" }}
    group: staff
{{ else }}
    group: root
{{ end }}
    mode: "0755"

command:
  composer --version:
    exit-status: 0
    stdout:
      - Composer version 2
{{ end }}
