---

- name: Converge
  hosts: all
  vars:
    manala_influxdb_dir:
      - /srv/db/influxdb/meta
      - /srv/db/influxdb/data
      - /srv/db/influxdb/wal
    manala_influxdb_config:
      - reporting-disabled: true
      - meta:
        - dir: /srv/db/influxdb/meta
      - data:
        - dir: /srv/db/influxdb/data
        - wal-dir: /srv/db/influxdb/wal
    manala_influxdb_databases:
      - my_db
    manala_influxdb_users:
      - database: my_db
        name:     my_user
        password: my_password
    manala_influxdb_privileges:
      - database: my_db
        user:     my_user
        grant:    ALL
  roles:
    - manala.influxdb
